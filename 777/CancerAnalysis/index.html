<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
    <title>Nitrate vs. Cancer Analysis</title>

    <!--CSS (load bootstrap from a CDN) -->
    <!-- Latest compiled and minified CSS -->
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.2.1/css/bootstrap.min.css" integrity="sha384-GJzZqFGwb1QTTN6wy59ffF1BuGJpLSa9DkKMp0DgiMDm4iYMj70gZWKYbI706tWS" crossorigin="anonymous">

    <!-- Optional theme -->
    <!--<link   rel="stylesheet" -->
    <!--        href="https://maxcdn.bootstrapcdn.com/bootstrap/4.2.1/css/bootstrap-theme.min.css" -->
    <!--        integrity="sha384-rHyoN1iRsVXV4nD0JutlnGaslCJuC7uwjduW9SVrLvRYooPp2bWYgmgJQIXwl/Sp" -->
    <!--        crossorigin="anonymous">-->

    <link rel="stylesheet" href="https://code.jquery.com/ui/1.12.1/themes/base/jquery-ui.css">

    <link href="https://fonts.googleapis.com/css?family=Lato:400,700" rel="stylesheet">

    <link rel="stylesheet" type="text/css" href="./css/style.css">
    <!-- <link rel="stylesheet" type="text/css" href="/css/controls.css"> -->
    <link rel="stylesheet" type="text/css" href="./css/spinner.css">
    <script src="https://code.jquery.com/jquery-3.3.1.min.js" integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=" crossorigin="anonymous"></script>

    <script src="https://code.jquery.com/ui/1.12.1/jquery-ui.min.js" integrity="sha256-VazP97ZCwtekAsvgPBSUwPFKdrwD3unUfSGVYrahUqU=" crossorigin="anonymous"></script>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.6/umd/popper.min.js" integrity="sha384-wHAiFfRlMFy6i5SRaxvfOCifBUQy1xHdJ/yoi7FRNXMRBu5WHdZYu1hA6ZOblgut" crossorigin="anonymous"></script>

    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.2.1/js/bootstrap.min.js" integrity="sha384-B0UglyR+jN6CkvvICOB2joaf5I4l3gm9GU6Hc1og6Ls7i6U/mkkaduKaBhlAXv9k" crossorigin="anonymous"></script>
    <script src='./lib/simple-statistics.min.js'>
    </script>
    <!--Add Turf.js to make spatial tools easier. -->
    <script src='https://npmcdn.com/@turf/turf/turf.min.js'></script>

    <!-- Add Chroma -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/chroma-js/2.0.2/chroma.min.js"></script>
    <script src='https://api.tiles.mapbox.com/mapbox-gl-js/v0.52.0/mapbox-gl.js'></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/d3/5.9.1/d3.min.js"></script>
    <link href='https://api.tiles.mapbox.com/mapbox-gl-js/v0.52.0/mapbox-gl.css' rel='stylesheet' />
    <!-- <link href='css/spinner.css' rel='stylesheet' /> -->

    </head>

    <body>
        <div class="overlay"></div>
        <div id="spinner">
            <h2>Aggregating Values</h2>
            <div class="sk-fading-circle">
                <div class="sk-circle1 sk-circle"></div>
                <div class="sk-circle2 sk-circle"></div>
                <div class="sk-circle3 sk-circle"></div>
                <div class="sk-circle4 sk-circle"></div>
                <div class="sk-circle5 sk-circle"></div>
                <div class="sk-circle6 sk-circle"></div>
                <div class="sk-circle7 sk-circle"></div>
                <div class="sk-circle8 sk-circle"></div>
                <div class="sk-circle9 sk-circle"></div>
                <div class="sk-circle10 sk-circle"></div>
                <div class="sk-circle11 sk-circle"></div>
                <div class="sk-circle12 sk-circle"></div>
            </div>
        </div>

        <div class="overlay"></div>
        <div id="learnMoreBox">
            <div class="popupCloseButton">X</div>
            <div class="container">
            <h2>Background Information</h2>
            <p>Recent research has identified a link between high nitrate conentrations in drinking water and cancer occurence. This map uses a spatial interpolation method called Inverse Distance Weighting (IDW) and a linear regression to explore the data and their interaction in Wisconsin.</p>
            <p>To explore the relationship, use the tool to change the Interpolation Grid Size to adjust how finely the intopolated values are created. Change the Interpolation Power value, also known as the distance decay coefficient, to adjust the influence of each sample location on the neighboring interpolated values. </p><br><br>
            <h2>Technical Details</h2>
            <p>This project was implemented by Dorn Moore as part of a capstone project in the Spring of 2019 for the University of Wisconsin online professional Masters program. This project uses the following libraries and tools: 
                <ul>
                    <li>MapBox GL API to handle Map display and manipulation.</li>
                    <li>Turf.js for spatial analysis calculations.</li>
                    <li>Chroma.js for color handling.</li>
                    <li>Bootstrap framework for the web styling.</li>
                    <li>JQuery for basic DOM manipulations.</li>
                </ul> 
            </p>
            <p>Data for this project was provided by the instructors and should not be trusted as being accurate to real measurements. </p>
        </div>
        </div>

        <div id="map"></div>
        <div class='ui-inner-container col-lg-4 col-sm-4 col-xs-12'>

            <div class="description">
                <h3>Mapping the Cancer Rates and Nitrates</h3>
                <p>Explore the relationship between cancer rates and nitrates in well water across Wisconsin. The analysis tool allows you to interpolate nitrate levels from well point data. </p>
                <p>The output shows how well a linear model of nitrate levels fits obeserved cancer rates in each census tract. </p>
                <div class="controls">
                    <fieldset>
                        <legend>Map Controls</legend>

                        <input type="checkbox" name="wells" id="wells">
                        <label for="wells" id="wells">Show Well Nitrate Levels </label>
                        <br />
                        <input type="checkbox" name="tracts" id="tracts">
                        <label for="tracts" id="tracts">Show Observed Cancer rates</label>
                        <br />
                        <input type="checkbox" name="residuals" id="residuals" style="display: none;">
                        <label for="residuals" id="residuals" style="display: none;">Show Model Residuals</label>
                        <br />
                        <input type="checkbox" name="predicted" id="predicted" style="display: none;">
                        <label for="predicted" id="predicted" style="display: none;">Show Predicted Cancer rates</label>


                    </fieldset>
                    <fieldset>
                        <legend>Analysis Tools</legend>
                        <label for="idwCell">Interpolation Grid Size</label>
                        <input type="text" id="idwCell" readonly style="border: 0; color:#1c1b53; font-weight: 200; width:30px; text-align:right;"> km


                        <div id="cellslider"></div>
                        <br />

                        <label for="idwPower">Interpolation Power</label>
                        <input type="text" id="idwPower" readonly style="border: 0; color:#1c1b53; font-weight: 200; width:25px;">


                        <div id="powerslider"></div>
                        <br />
                        <button id="idwRecalculate" class="ui-button ui-widget ui-corner-all">
                        Calculate Surface
                        </button>
                    </fieldset>

                </div>
                <div id='residuals-legend' class='legend' style="display: none;">
                    <h4>Model Fit</h4>
                    <!-- '#b2182b', '#ef8a62', '#fddbc7', '#d1e5f0', '#67a9cf', '#2166ac' -->
                    <div><span style='background-color: #b2182b'></span>> 2.5 Standard Deviations</div>
                    <div><span style='background-color: #ef8a62'></span>1.5 - 2.5 Standard Deviations</div>
                    <div><span style='background-color: #fddbc7'></span>0.5 - 1.5 Standard Deviations</div>
                    <div><span style='background-color: #e7e0dc'></span>0.5 - -0.5 Standard Deviations</div>
                    <div><span style='background-color: #d1e5f0'></span>-0.5 - -1.5 Standard Deviations</div>
                    <div><span style='background-color: #67a9cf'></span>-1.5 - -2.5 Standard Deviations</div>
                    <div><span style='background-color: #2166ac'></span>
                        < -2.5 Standard Deviations</div>
                </div>
                <p></p>
                <button id="learnMore" class="ui-button ui-widget ui-corner-all">
                    Learn More about this Project
                    </button>  
            </div>
        </div>
    </div>

    <script type="application/javascript" src="js/map.js"></script>
    <script>
            loadBaseData('pk.eyJ1IjoiZG9ybm1vb3JlIiwiYSI6ImNpc2h3MHdmbDAwOGEyb2xzenV5aDNmaGoifQ.kuZDCRIvE_BQbpUl6KxwbQ');
            // drawMap(-89.751637, 43.547971, 'map', 'pk.eyJ1IjoiZG9ybm1vb3JlIiwiYSI6ImNpc2h3MHdmbDAwOGEyb2xzenV5aDNmaGoifQ.kuZDCRIvE_BQbpUl6KxwbQ')
    </script>



</body>
</html>